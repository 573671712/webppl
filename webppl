#!/usr/bin/env node --stack-size=65500

var fs = require('fs');
var webppl = require('./src/main');
var parseArgs = require('minimist');

function main(){
  var argv = parseArgs(process.argv.slice(2));
  var programFile = argv._[0];
  console.log('Processing', programFile);
  var code = fs.readFileSync(programFile);
  webppl_eval(
    function(s,x){
      console.log("\n* Program return value:\n");
      console.log(x);
    },
    code,
    argv.verbose);
}

main()
